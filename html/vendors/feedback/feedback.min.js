!function(e,t,a){function i(e){return s.gettext(e)}var n={label:"Feedback",header:"Send your Feedback",nextLabel:"Continue",reviewLabel:"Review",sendLabel:"Send",closeLabel:"Close",messageSuccess:"Your feedback was sent successfully.",messageError:"There was an error sending your feedback to our server.",formDescription:"Please describe the issue you are experiencing",highlightDescription:"Highlight or blackout important information",highlight:"Highlight",blackout:"Blackout",issue:"Issue"},s=Object.create({default:n,lang:"default",gettext:function(e){var t=this[this.lang]||this[this.lang.substring(0,2)];return t&&t[e]?t[e]:this.default[e]?this.default[e]:e}});if(s.de_DE={label:"Ihre Meinung",header:"Senden Sie Ihre Meinung",nextLabel:"Weiter",reviewLabel:"Überprüfen",sendLabel:"Senden",closeLabel:"Schliessen",messageSuccess:"Ihre Meinung wurde erfolgreich gesendet.",messageError:"Fehler beim senden Ihrer Meinung an unser Server.",formDescription:"Bitte beschreiben Sie das Problem das bei Ihnen auftritt",highlightDescription:"Wichtige Informationen markieren oder verdunkeln",highlight:"Markieren",blackout:"Verdunkeln",issue:"Problem"},s.de=s.de_DE,s.es_MX={label:"Comentarios",header:"Envíe sus comentarios",nextLabel:"Continuar",reviewLabel:"Revisar",sendLabel:"Enviar",closeLabel:"Cerrar",messageSuccess:"Sus comentarios fueron enviados con éxito.",messageError:"Hubo un error al enviar sus comentarios a nuestro servidor.",formDescription:"Por favor describa el problema que está experimentando",highlightDescription:"Resaltar o ocultar información importante",highlight:"Resaltar",blackout:"Ocultar",issue:"Problema"},s.es=s.es_MX,s.it_IT={label:"Commenta",header:"Invia il tuo commento",nextLabel:"Continua",reviewLabel:"Rivedi",sendLabel:"Invia",closeLabel:"Chiudi",messageSuccess:"Il tuo commento è stato inviato con successo.",messageError:"C'è stato un errore nell'invio del tuo commento al nostro server.",formDescription:"Per favore descrivi il problema",highlightDescription:"Evidenzia o nascondi le informazioni importanti",highlight:"Evidenzia",blackout:"Nascondi",issue:"Problema"},s.it=s.it_IT,s.pt_BR={label:"Comentários",header:"Envie seus comentários",nextLabel:"Prossegue",reviewLabel:"Revisa",sendLabel:"Envia",closeLabel:"Fecha",messageSuccess:"Seus comentários foram enviados com sucesso.",messageError:"Houve um erro ao enviar os seus comentários para o nosso servidor.",formDescription:"Por favor, descreva o problema que está ocorrendo",highlightDescription:"Destaque ou oculte informação importante",highlight:"Destacar",blackout:"Ocultar",issue:"Problema"},s.pt=s.pt_BR,s.ru_RU={label:"Сообщить об ошибке",header:"Сообщить об ошибке",nextLabel:"Далее",reviewLabel:"Далее",sendLabel:"Отправить",closeLabel:"Закрыть",messageSuccess:"Ваше сообщение успешно отправлено.",messageError:"Произошла ошибка при отправке сообщения на сервер.",formDescription:"Пожалуйста, опишите проблему с которой вы столкнулись",highlightDescription:"Выделите или спрячьте важную информацию",highlight:"Выделить",blackout:"Спрятать",issue:"Ваше сообщение"},s.ru=s.ru_RU,e.Feedback===a){var o,r=function(t){e.console.log(t)},l=function(e){for(var t=e.length-1;t>=0;t--){var a=e[t];a&&a.parentNode&&a.parentNode.removeChild(a)}},c=function(){var e=t.createElement("div"),a=3;for(e.className="feedback-loader";a--;)e.appendChild(t.createElement("span"));return e},d=function(e){return e.getBoundingClientRect()},h=function(e){for(var t;null!==(t=e.firstChild)&&e.removeChild(t););},p=function(e,a){var i=t.createElement(e);return i.appendChild(t.createTextNode(a)),i},g=function(t,i){if(t.onload!==a)return i;if(t.onreadystatechange!==a){var n=function(){"loaded"!==t.readyState&&"complete"!==t.readyState?e.setTimeout(n,250):i()};e.setTimeout(n,250)}else r("ERROR: We can't track when script is loaded")},u=function(){var e;if(e=navigator.languages!==a?navigator.languages[0]:navigator.language,r("language = "+e),e)return e.replace("-","_")},m="data-html2canvas-ignore",b=t.createElement("div");e.Feedback=function(n){n=n||{},n.url=n.url||"/",n.adapter=n.adapter||new e.Feedback.XHR(n.url),n.lang=n.lang||"auto","auto"===n.lang&&(n.lang=u()),s.lang=n.lang,n.pages===a&&(n.pages=[new e.Feedback.Form,new e.Feedback.Screenshot(n),new e.Feedback.Review]);var r,d,g,f=t.createElement("div"),v={open:function(){var a=n.pages.length;for(g=0;g<a;g++)n.pages[g]instanceof e.Feedback.Review||n.pages[g].render();var s=p("a","×"),l=t.createElement("div"),c=t.createElement("div");d=t.createElement("div"),t.body.appendChild(f),s.className="feedback-close",s.onclick=v.close,s.href="#",r.disabled=!0,l.appendChild(s),l.appendChild(p("h3",i("header"))),l.className="feedback-header",b.className="feedback-body",h(b),g=0,b.appendChild(n.pages[g++].dom),o=p("button",i("nextLabel")),o.className="feedback-btn",o.onclick=function(){g>0&&n.pages[g-1].end(d)===!1||(h(b),g===a?v.send(n.adapter):(n.pages[g].start(d,l,c,o),n.pages[g]instanceof e.Feedback.Review&&n.pages[g].render(n.pages),b.appendChild(n.pages[g++].dom),g===a&&(o.firstChild.nodeValue=i("sendLabel")),n.pages[g]instanceof e.Feedback.Review&&(o.firstChild.nodeValue=i("reviewLabel"))))},c.className="feedback-footer",c.appendChild(o),d.className="feedback-modal",d.setAttribute(m,!0),d.appendChild(l),d.appendChild(b),d.appendChild(c),t.body.appendChild(d)},close:function(){r.disabled=!1,l([d,f]),g>0&&n.pages[g-1].end(d);for(var e=0,t=n.pages.length;e<t;e++)n.pages[e].close();return!1},send:function(s){if(!(s instanceof e.Feedback.Send))throw new Error("Adapter is not an instance of Feedback.Send");for(var r,l=0,d=n.pages.length,p=[],g=0;l<d;l++)(r=n.pages[l].data())!==!1&&(p[g++]=r);o.disabled=!0,h(b),b.appendChild(c()),s.send(p,function(s){h(b),o.disabled=!1,o.firstChild.nodeValue=i("closeLabel"),o.onclick=function(){return v.close(),!1},s===!0?b.appendChild(t.createTextNode(i("messageSuccess"))):b.appendChild(t.createTextNode(i("messageError")));for(var r=n.pages.length,l=0;l<r;l++)n.pages[l]instanceof e.Feedback.Review||(n.pages[l]._data=a)})}};return f.className="feedback-glass",f.style.pointerEvents="none",f.setAttribute(m,!0),n=n||{},r=p("button",i("label")),r.className="feedback-btn feedback-bottom-right",r.setAttribute(m,!0),r.onclick=v.open,null!==n.appendTo&&(n.appendTo!==a?n.appendTo:t.body).appendChild(r),v},e.Feedback.Page=function(){},e.Feedback.Page.prototype={render:function(e){this.dom=e},start:function(){},close:function(){},data:function(){return!1},review:function(){return null},end:function(){return!0}},e.Feedback.Send=function(){},e.Feedback.Send.prototype={send:function(){}},e.Feedback.Form=function(e){this.elements=e||[{type:"textarea",name:"issue",label:i("formDescription"),required:!1}],this.dom=t.createElement("div")},e.Feedback.Form.prototype=new e.Feedback.Page,e.Feedback.Form.prototype.render=function(){var e,a=0,i=this.elements.length;for(h(this.dom);a<i;a++)switch(e=this.elements[a],e.type){case"textarea":this.dom.appendChild(p("label",e.label+":"+(e.required===!0?" *":""))),this.dom.appendChild(e.element=t.createElement("textarea"))}return this},e.Feedback.Form.prototype.end=function(){for(var e,t=0,a=this.elements.length;t<a;t++){if(e=this.elements[t],e.required===!0&&0===e.element.value.length)return e.element.className="feedback-error",!1;e.element.className=""}return!0},e.Feedback.Form.prototype.data=function(){if(this._data!==a)return this._data;for(var i,n=0,s=this.elements.length,o={};n<s;n++)i=this.elements[n],o[i.name]=i.element.value;return o.url=e.location.href,o.timeOpened=new Date,o.timezone=(new Date).getTimezoneOffset()/60,o.pageon=e.location.pathname,o.referrer=t.referrer,o.previousSites=history.length,o.browserName=navigator.appName,o.browserEngine=navigator.product,o.browserVersion1a=navigator.appVersion,o.browserVersion1b=navigator.userAgent,o.browserLanguage=navigator.language,o.browserOnline=navigator.onLine,o.browserPlatform=navigator.platform,o.javaEnabled=navigator.javaEnabled(),o.dataCookiesEnabled=navigator.cookieEnabled,o.dataCookies1=t.cookie,o.dataCookies2=decodeURIComponent(t.cookie.split(";")),o.dataStorage=localStorage,o.sizeScreenW=screen.width,o.sizeScreenH=screen.height,o.sizeDocW=t.width,o.sizeDocH=t.height,o.sizeInW=innerWidth,o.sizeInH=innerHeight,o.sizeAvailW=screen.availWidth,o.sizeAvailH=screen.availHeight,o.scrColorDepth=screen.colorDepth,o.scrPixelDepth=screen.pixelDepth,this._data=o},e.Feedback.Form.prototype.review=function(e){for(var a,i=0,n=this.elements.length;i<n;i++)a=this.elements[i],a.element.value.length>0&&(e.appendChild(p("label",a.label+":")),e.appendChild(t.createTextNode(a.element.value)),e.appendChild(t.createElement("hr")));return e},e.Feedback.Review=function(){this.dom=t.createElement("div"),this.dom.className="feedback-review"},e.Feedback.Review.prototype=new e.Feedback.Page,e.Feedback.Review.prototype.render=function(e){var t=0,a=e.length;for(h(this.dom);t<a;t++)e[t].review(this.dom);return this},e.Feedback.Screenshot=function(e){this.options=e||{},this.options.blackoutClass=this.options.blackoutClass||"feedback-blackedout",this.options.highlightClass=this.options.highlightClass||"feedback-highlighted",this.h2cDone=!1},e.Feedback.Screenshot.prototype=new e.Feedback.Page,e.Feedback.Screenshot.prototype.end=function(e){e.className=e.className.replace(/feedback\-animate\-toside/,""),t.body.removeEventListener("mousemove",this.mouseMoveEvent,!1),t.body.removeEventListener("click",this.mouseClickEvent,!1),l([this.h2cCanvas]),this.h2cDone=!1},e.Feedback.Screenshot.prototype.close=function(){l([this.blackoutBox,this.highlightContainer,this.highlightBox,this.highlightClose]),l(t.getElementsByClassName(this.options.blackoutClass)),l(t.getElementsByClassName(this.options.highlightClass))},e.Feedback.Screenshot.prototype.start=function(n,s,o,r){var l=this;if(this.h2cDone){h(this.dom),r.disabled=!1;var g="feedback-highlight-element",u="data-exclude",m=!0;this.mouseMoveEvent=function(t){var i=t.target.className;if(i=i.baseVal!==a?i.baseVal:i,t.target!==v&&(i.indexOf(l.options.blackoutClass)!==-1||i.indexOf(l.options.highlightClass)!==-1)){var o=parseInt(t.target.style.left,10)+parseInt(t.target.style.width,10);o=Math.max(o,10),o=Math.min(o,e.innerWidth-15);var c=parseInt(t.target.style.top,10);return c=Math.max(c,10),k.style.left=o+"px",k.style.top=c+"px",f=t.target,F(),void(v=a)}return"BODY"===t.target.nodeName||t.target===k||t.target===n||t.target===r||t.target.parentNode===n||t.target.parentNode===s?(F(),void(v=t.target)):(S(),void(t.target!==v&&(v=t.target,e.clearTimeout(b),b=e.setTimeout(function(){var t,a=d(v);m===!1?t=y:(t=C,t.width=a.width,t.height=a.height,E.drawImage(l.h2cCanvas,e.pageXOffset+a.left,e.pageYOffset+a.top,a.width,a.height,0,0,a.width,a.height)),t.setAttribute(u,!1),t.style.left=e.pageXOffset+a.left+"px",t.style.top=e.pageYOffset+a.top+"px",t.style.width=a.width+"px",t.style.height=a.height+"px"},100))))},this.mouseClickEvent=function(e){if(e.preventDefault(),m===!1){if("false"===y.getAttribute(u)){var i=t.createElement("div");i.className=l.options.blackoutClass,i.style.left=y.style.left,i.style.top=y.style.top,i.style.width=y.style.width,i.style.height=y.style.height,t.body.appendChild(i),v=a}}else"false"===C.getAttribute(u)&&(C.className+=" "+l.options.highlightClass,C.className=C.className.replace(/feedback\-highlight\-element/g,""),l.highlightBox=C=t.createElement("canvas"),E=C.getContext("2d"),C.className+=" "+g,t.body.appendChild(C),F(),v=a)},this.highlightClose=p("div","×"),this.blackoutBox=t.createElement("div"),this.highlightBox=t.createElement("canvas"),this.highlightContainer=t.createElement("div");var b,f,v,k=this.highlightClose,C=this.highlightBox,y=this.blackoutBox,w=this.highlightContainer,E=C.getContext("2d"),x=function(e){e.preventDefault(),L.className.indexOf("active")===-1?(L.className+=" active",D.className=D.className.replace(/active/g,"")):(D.className+=" active",L.className=L.className.replace(/active/g,"")),m=!m},F=function(){N(y),N(C),e.clearTimeout(b)},N=function(e){e.style.left="-5px",e.style.top="-5px",e.style.width="0px",e.style.height="0px",e.setAttribute(u,!0)},S=function(){k.style.left="-50px",k.style.top="-50px"},L=p("a",i("blackout")),D=p("a",i("highlight"));n.className+=" feedback-animate-toside",k.id="feedback-highlight-close",k.addEventListener("click",function(){f.parentNode.removeChild(f),S()},!1),t.body.appendChild(k),this.h2cCanvas.className="feedback-canvas",t.body.appendChild(this.h2cCanvas);var R=[D,L];this.dom.appendChild(p("p",i("highlightDescription")));for(var T=0;T<2;T++)R[T].className="feedback-btn feedback-btn-small "+(0===T?"active":"feedback-btn-inverse"),R[T].href="#",R[T].onclick=x,this.dom.appendChild(R[T]),this.dom.appendChild(t.createTextNode(" "));w.id="feedback-highlight-container",w.style.width=this.h2cCanvas.width+"px",w.style.height=this.h2cCanvas.height+"px",this.highlightBox.className+=" "+g,this.blackoutBox.id="feedback-blackout-element",t.body.appendChild(this.highlightBox),w.appendChild(this.blackoutBox),t.body.appendChild(w),t.body.addEventListener("mousemove",this.mouseMoveEvent,!1),t.body.addEventListener("click",this.mouseClickEvent,!1)}else{var I=arguments;r.disabled!==!0&&this.dom.appendChild(c()),r.disabled=!0,e.setTimeout(function(){l.start.apply(l,I)},500)}},e.Feedback.Screenshot.prototype.render=function(){this.dom=t.createElement("div");var i,n=this,s=this.options,o=function(){s.onrendered=s.onrendered||function(e){n.h2cCanvas=e,n.h2cDone=!0},e.html2canvas(t.body, s).then(s.onrendered).catch(function(e){n.h2cDone=!0,r("Error in html2canvas: "+e.message)})};if(e.html2canvas===a&&i===a){i=t.createElement("script"),i.src=s.h2cPath||"libs/html2canvas.js",i.onerror=function(){r("Failed to load html2canvas library, check that the path is correctly defined")},i.onload=g(i,function(){return e.html2canvas===a?void r("Loaded html2canvas, but library not found"):(e.html2canvas.logging=e.Feedback.debug,void o())});var l=t.getElementsByTagName("script")[0];l.parentNode.insertBefore(i,l)}else o();return this},e.Feedback.Screenshot.prototype.data=function(){if(this.h2cCanvas!==a){var e,i,n=this.h2cCanvas.getContext("2d"),s=5;n.fillStyle="#000",Array.prototype.slice.call(t.getElementsByClassName("feedback-blackedout"),0).forEach(function(e){var t=d(e);n.fillRect(t.left,t.top,t.width,t.height)});var o=Array.prototype.slice.call(t.getElementsByClassName("feedback-highlighted"),0);o.length>0&&(e=t.createElement("canvas"),i=e.getContext("2d"),e.width=this.h2cCanvas.width,e.height=this.h2cCanvas.height,i.drawImage(this.h2cCanvas,0,0),n.fillStyle="#777",n.globalAlpha=.5,n.fillRect(0,0,this.h2cCanvas.width,this.h2cCanvas.height),n.beginPath(),o.forEach(function(e){var t=parseInt(e.style.left,10),a=parseInt(e.style.top,10),i=parseInt(e.style.width,10),o=parseInt(e.style.height,10);n.moveTo(t+s,a),n.lineTo(t+i-s,a),n.quadraticCurveTo(t+i,a,t+i,a+s),n.lineTo(t+i,a+o-s),n.quadraticCurveTo(t+i,a+o,t+i-s,a+o),n.lineTo(t+s,a+o),n.quadraticCurveTo(t,a+o,t,a+o-s),n.lineTo(t,a+s),n.quadraticCurveTo(t,a,t+s,a)}),n.closePath(),n.clip(),n.globalAlpha=1,n.drawImage(e,0,0));try{return this._data=this.h2cCanvas.toDataURL()}catch(e){}}},e.Feedback.Screenshot.prototype.review=function(e){var t=this.data();if(t!==a){var i=new Image;i.src=t,i.style.width="300px",e.appendChild(i)}},e.Feedback.XHR=function(e){this.xhr=new XMLHttpRequest,this.url=e},e.Feedback.XHR.prototype=new e.Feedback.Send,e.Feedback.XHR.prototype.send=function(t,a){var i=this.xhr;i.onreadystatechange=function(){4==i.readyState&&a(200===i.status)},i.open("POST",this.url,!0),i.setRequestHeader("Content-type","application/json"),i.send(e.JSON.stringify(t))}}}(window,document);
